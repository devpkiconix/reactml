// Code generated by reactml
import React from "react";
import connect from "react-redux";

import lib from "./lib";

import TagFactory from "./tag-factory";
const { Grid, Paper, TextField, Button, Status } = TagFactory;

const Editor = props => {
  return (
    <React.Fragment>
      <h4>ReactML component name - Editor</h4>

      <Grid container={true}>
        <Grid item={true} xs={12}>
          <Paper className={props.classes.root}>
            <Grid container={true}>
              <Grid item={true} xs={4}>
                <TextField
                  className={"textField"}
                  label={"Name"}
                  value={props.firstName}
                  onChange={props.onFirstNameChange}
                  helperText={"What's your name?"}
                  margin={"normal"}
                />
              </Grid>

              <Grid item={true} xs={8} className={props.classes.email}>
                <TextField
                  label={"E-mail"}
                  value={props.email}
                  helperText={"What's your email address?"}
                  onChange={props.onEmailChange}
                  margin={"normal"}
                />
              </Grid>

              <Grid item={true} xs={12}>
                <Button
                  variant={"contained"}
                  color={"primary"}
                  onClick={props.save}
                >
                  <span>Save</span>
                </Button>

                <Button color={"secondary"}>
                  <span>cancel</span>
                </Button>

                <Status status={props.saveStatus} />
              </Grid>

              <Grid item={true} xs={10}>
                <Paper>
                  <div>Editor code:</div>

                  <pre
                    style={{
                      fontFamily: "Menlo",
                      fontSize: "10pt"
                    }}
                  >
                    {props.yaml}
                  </pre>
                </Paper>
              </Grid>
            </Grid>
          </Paper>
        </Grid>
      </Grid>
    </React.Fragment>
  );
};

const mapStateToProps = ({ reactml }) => {
  let compState = reactml.get(stateNodeName);
  return {
    email: compState.getIn(["user", "email"]),
    firstName: compState.getIn(["user", "firstName"]),
    saveStatus: compState.getIn(["status", "save"]),
    yaml: compState.getIn(["specText"]),
    onChangeYaml: compState.getIn(["onChangeYaml"]),
    yamlError: compState.getIn(["specError"])
  };
};

const mapActionsToProps = {
  onFirstNameChange: lib.onFirstNameChange,
  onEmailChange: lib.onEmailChange,
  save: lib.save
};

export default connect(
  mapStateToProps,
  mapActionsToProps
)(Editor);
